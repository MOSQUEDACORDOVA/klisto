<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
	crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
	integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
	crossorigin="anonymous"></script>


<link href="/assets/css/misPublicaciones.css" rel="stylesheet"/>
<script src="/assets/js/jquery-ui.js"></script>
<link href="/assets/summernote/summernote-bs4.min.css" rel="stylesheet">
<script src="/assets/summernote/summernote-bs4.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<link href="https://cdn.jsdelivr.net/css-toggle-switch/latest/toggle-switch.css" rel="stylesheet" />

<script>
  $(function () {
        $('.delete_publicacion').on('click', (e) => {
      let id = e.target.classList.item(2)
      let tipo = e.target.classList.item(3)
      Swal.fire({
        title: 'Eliminar',
        text: "Seguro desea eliminar la publicación indicada!",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        cancelButtonText: 'Volver',
        confirmButtonText: 'Eliminar'
      }).then((result) => {
        if (result.isConfirmed) {
          window.location.href = `/delete_publicacion/${id}/${tipo}`;
        }
      })
    })
$('#domicilio_check').on('change',function() {
    if ($('#domicilio_check').is(":checked")== true){
      $('#domicilio_check').val('SI')
$('#costo_domicilio').removeClass('d-none')
    }else{
      console.log('no')
      $('#domicilio_check').val('0')
      $('#costo_domicilio').addClass('d-none')
    }
  })
$('.sucursales_check:checked').each(function() {
   var id_suc = $(this).val()
        $('.sucur'+id_suc).show()
        let suc_actual=$('#sucursales_p').text()
        console.log($(this).text())
        $('#sucursales_p').text($('#suc'+id_suc).text()+'/'+suc_actual+'' )
      console.log("hola")
    }
);
$('.btn_submit_preview').on('click',()=>{
        if($('#preview_publicacion').is(':visible')){
        $('#crear_publicacion').show()
        $('#preview_publicacion').hide()
      }
        $('.btn_submit').click()})
$('.preview').on('click', () => {
        if($('#preview_publicacion').is(':visible')){
        $('#preview_publicacion').hide()
        $('#crear_publicacion').show()
      }else{
      $('#preview_publicacion').show()
      $('#crear_publicacion').hide()
      $('#titulo_preview').text($('#titulo').val())
      $('#precio_preview').text('S/' + $('#precio').val())
      $('#costo_serv').text($('#precio').val())
       $('#costo_trans').text($('#costo_domicilio').val())
      $('#descripcion_preview').text($('#descripcion').val())
      $('#condiciones_preview').text($('#condiciones').val())
      console.log($('#desde').val())
      $('#desde_preview').text($('#desde').val())
      $('#hasta_preview').text($('#hasta').val())
      $('#preparacion_p').text($('#preparacion').val()) 
      $('#ejecucion_p').text($('#ejecucion').val()) 
 let preparacion_p = $('#preparacion_p').text()
let ejecucion_p = $('#ejecucion_p').text()
let tiempo = parseInt(preparacion_p)+parseInt(ejecucion_p)
$('#duracion_total').text(tiempo+ ' min')

       if($('.editar_public')){
          $('#img_preview').attr('src', "../assets/img_up/" + $('#imagen1').val())
       $('#img1').attr('src', "../assets/img_up/" + $('#imagen2').val())
      $('#img2').attr('src', "../assets/img_up/" + $('#imagen3').val())
      $('#img3').attr('src', "../assets/img_up/" + $('#imagen4').val())
      $('#img4').attr('src', "../assets/img_up/" + $('#imagen5').val())
      }else{
         $('#img_preview').attr('src', "assets/img_up/" + $('#imagen1').val())
        $('#img1').attr('src', "assets/img_up/" + $('#imagen2').val())
      $('#img2').attr('src', "assets/img_up/" + $('#imagen3').val())
      $('#img3').attr('src', "assets/img_up/" + $('#imagen4').val())
      $('#img4').attr('src', "assets/img_up/" + $('#imagen5').val())
      }
      }


    })
$('.sucursales_check').on('change', (e) => {
      var id_suc = e.target.classList.item(1)
      if($('.sucur'+id_suc).is(':visible')){
        $('.sucur'+id_suc).hide()
      }else{
        $('.sucur'+id_suc).show()
        let suc_actual=$('#sucursales_p').text()
        console.log(suc_actual)
        $('#sucursales_p').text($('#suc'+id_suc).text()+'/'+suc_actual+'' )
      }})

  })
</script>
{{#if msg}}
<label id="msgs">{{msg}}</label>


{{/if}}

<div class="page-container">
  <div class="main-content">
    <div class="section__content section__content--p30">
      <main>
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              <div class="overview-wrap">
                <h2 class="title-1 pb-3">
                  Mis publicaciones
                </h2>
              </div>
            </div>
          </div>

          {{#if mispublicaciones}}
          <div class="col-md-12">
            <div class="card-blank">
              <div class="card-body">
                <div class="float-right" style="margin-bottom: 20px;">
                  <a href="/crear_publicacion">
                    Crear publicación
                  </a>
                </div>
                <table class="table dataTable tabla_" id="tabla_">
                  <thead>
                    <tr>
                      <th>

                      </th>
                      <th>
                        Título
                      </th>
                      <th>
                        Estado
                      </th>
                      <th>
                        Precio
                      </th>
                      <th>
                        D. Billetera
                      </th>
                      <th align="center">
                        Opciones
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    {{#each publicaciones as |publicacion i|}}
                    <tr>
                      <td>
                        <center>
                          <img id="imageSelected1" class="img-fluid"
                            src="../assets/img_up/{{#fotoPrincipalPublicacion publicacion.fotos}}{{/fotoPrincipalPublicacion}}"
                            width="70px" style="height: 70px; border-radius: 15px;"/>
                        </center>
                      </td>
                      <td>
                        {{publicacion.titulo}}
                      </td>
                      <td>
                        <span>
                          <strong style="color: {{#ColorSucursal publicacion.estado}}{{/ColorSucursal}};">
                            {{publicacion.estado}}
                          </strong>
                        </span>
                      </td>
                      <td>
                        S/ {{publicacion.precio}}
                      </td>
                      <td>
                        S/ {{publicacion.billetera}}
                      </td>
                      <td align="center">
                        <div class="table-data-feature">
                          <a class="item" href="/editar_publicacion/{{publicacion.id}}" data-toggle="tooltip"
                            data-placement="top" title="Editar" id="empleados_button">
                            <i class="fas fa-edit"></i>
                          </a>
                          <a class="item delete_publicacion {{publicacion.id}} {{publicacion.tipo}}" href="#"
                            id="delete_publicacion" data-toggle="tooltip" data-placement="top" title="Tooltip on top">
                            <i class="fas fa-trash-alt {{publicacion.id}} {{publicacion.tipo}}"></i>
                          </a>
                        </div>
                      </td>
                    </tr>
                    {{/each}}

                  </tbody>
                </table>
              </div>
            </div>
          </div>
          {{/if}}

          {{#if crear_publicacion}}
          <div class="row reservar" id="crear_publicacion">

            <div class="card-blank" >
              <div class="overview-wrap pt-4 pl-4 pr-4">
                <h2 class="title-1">Crear publicación</h2>
                <div class="float-right"><a href="/mispublicaciones" id="volver_publicaciones"> Volver </a></div>
              </div>
              <form action="/crear_publicacion" method="post" id="form_mis_publicaciones">
                <div class="row">
                  <div class="col">
                    <center>
                      <span id="span1"><img id="imageSelected1" class="img-fluid"
                        src="../assets/img_up/foto_camara.png"
                        onclick="document.getElementById('profile-img1').click();" width="50px" style="object-fit: cover;"/></span>
                      <input
                        class="border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm img_publicacion"
                        id="profile-img1" type="file" accept=".png, .jpg, .jpeg, .mp4, .webm, .ogg" name="image" hidden />
                      <input type="text" id="imagen1" class="" name='photo' hidden required>
                      				<div id='progressBar3' class='progress-bar profile-img1-Pro' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: 0%; border-radius: 10px;'>0%

				</div>
                      <button type="button" class="btn btn-primary btn-upload-img" onclick="document.getElementById('profile-img1').click();">Subir img/video</button>
                    </center>
                  </div>
                  <div class="col">
                    <center>
                      <span id="span2"><img id="imageSelected2" class="img-fluid"
                        src="../assets/img_up/foto_camara.png"
                        onclick="document.getElementById('profile-img2').click();" width="50px" /></span>
                      <input
                        class="border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm img_publicacion"
                        id="profile-img2" type="file" accept=".png, .jpg, .jpeg, .mp4, .webm, .ogg" name="image" hidden />
                      <input type="text" id="imagen2" class="" name='photo' hidden>
                                            				<div id='progressBar3' class='progress-bar profile-img2-Pro' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: 0%; border-radius: 10px;'>0%

				</div>
<button type="button" class="btn btn-primary btn-upload-img" onclick="document.getElementById('profile-img2').click();">Subir img/video</button>
                    </center>
                  </div>
                  <div class="col">
                    <center>
                     <span id="span3"> <img id="imageSelected3" class="img-fluid"
                        src="../assets/img_up/foto_camara.png"
                        onclick="document.getElementById('profile-img3').click();" width="50px" /></span>
                      <input
                        class="border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm img_publicacion"
                        id="profile-img3" type="file" accept=".png, .jpg, .jpeg, .mp4, .webm, .ogg" name="image" hidden />
                      <input type="text" id="imagen3" class="" name='photo' hidden>
                      <div id='progressBar3' class='progress-bar profile-img3-Pro' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: 0%; border-radius: 10px;'>0%

				</div>
<button type="button" class="btn btn-primary btn-upload-img" onclick="document.getElementById('profile-img3').click();">Subir img/video</button>
                    </center>
                  </div>
                  <div class="col">
                    <center>
                      <span id="span4"><img id="imageSelected4" class="img-fluid"
                        src="../assets/img_up/foto_camara.png"
                        onclick="document.getElementById('profile-img4').click();" width="50px" /></span>
                      <input
                        class="border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm img_publicacion"
                        id="profile-img4" type="file" accept=".png, .jpg, .jpeg, .mp4, .webm, .ogg" name="image" hidden />
                      <input type="text" id="imagen4" class="" name='photo' hidden>
                      <div id='progressBar3' class='progress-bar profile-img4-Pro' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: 0%; border-radius: 10px;'>0%

				</div>
<button type="button" class="btn btn-primary btn-upload-img" onclick="document.getElementById('profile-img4').click();">Subir img/video</button>
                    </center>
                  </div>
                  <div class="col">
                    <center>
                     <span id="span5"> <img id="imageSelected5" class="img-fluid"
                        src="../assets/img_up/foto_camara.png"
                        onclick="document.getElementById('profile-img5').click();" width="50px" style="object-fit: cover;"/></span>
                      <input
                        class="border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm img_publicacion"
                        id="profile-img5" type="file" accept=".png, .jpg, .jpeg, .mp4, .webm, .ogg" name="image" hidden />
                      <input type="text" id="imagen5" class="" name='photo' hidden>
                      <div id='progressBar3' class='progress-bar profile-img5-Pro' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: 0%; border-radius: 10px;'>0%
                      </div>
<button type="button" class="btn btn-primary btn-upload-img" onclick="document.getElementById('profile-').click();">Subir img/video</button>
                    </center>
                  </div>
                </div>

                <div class="card-body">

                  <input type="text" class="form-control" name="userid" hidden value="{{user.id}}" />

                  <div class="col">
                    <div class="form-row" style="display: none";>
                      <div class="col-7">
                        <label for="formGroupExampleInput">Horario de atención:</label>
                      </div>
                      <div class="col">
                        Desde <input type="time" class="form-control" placeholder="Desde" name="desde" id="desde" value="{{sucursales.0.desde}}">
                      </div>
                      <div class="col">
                        Hasta <input type="time" class="form-control" placeholder="Hasta" name="hasta" id="hasta" value="{{sucursales.0.hasta}}">
                      </div>
                    </div>
                  </div>
                  <div class="col" style="padding: 0;">
                    <label for="formGroupExampleInput">Tiempo de duración del servicio:</label>
                    <div class="form-row">
                      <div class="col mb-3">
                        Preparación <input type="text" class="form-control" placeholder="Tiempo de Preparación" name="preparacion" id="preparacion">
                      </div>
                      <div class="col mb-3">
                        Ejecución <input type="text" class="form-control" placeholder="Tiempo de ejecución" name="ejecucion" id="ejecucion">
                      </div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="col-md-3 mb-3">
                      Título principal
                      <input type="text" class="form-control" id="titulo" placeholder="Nombre" name="titulo" required>
                    </div>
                    <div class="col-md-3 mb-3">
                      Precio
                      <input type="number" class="form-control" id="precio" name="precio" step="0.01" required>
                      <input type="number" class="form-control" id="comision" name="comision" step="0.01" value="{{comision.valor}}" hidden>
                    </div>
                    <div class="col-md-3 mb-3">
                      Billetera
                      <input type="number" class="form-control" id="billetera" name="billetera" step="0.01" required readonly>
                    </div>
                     <div class="col-md-3 mb-3 d-none" id="costo_domicilio">
                      Costo domicilio
                      <input type="number" class="form-control" id="costo_domicilio" name="costo_domicilio" step="0.01"  >
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group col-md-4">
                      Categoría 
                      <select id="categorias" multiple class="select2 form-control" name="categoria">
                        {{#each categorias as |categoria i|}}
                        <option value="{{categoria.nombre}}">{{categoria.nombre}} </option>
                         {{/each}}
                      </select>

                    </div>
                    <div class="form-group col-md-3">
                      Estado
                      <select id="inputState" class="form-control" name="estado">
                        <option selected value="Activa">Activa </option>
                        <option value="Inactiva">Inactiva</option>
                      </select>
                    </div>
                    <div class="form-group col-md-5">
                      Servicio a domicilio
                      <label id=""><input type="checkbox" id="domicilio_check" name="domicilio"> Tiene servicio a domicilio</label>
                    </div>
                  </div>

                  <div class="form-row">
                    <div class="form-group col-md-6">
                      <label for="exampleFormControlTextarea1">Descripción</label>
                      <textarea class="form-control" id="descripcion" rows="3" name="descripcion"></textarea>
                      <script>
										$('#descripcion').summernote({
											placeholder: 'Ingrese aqui la descripción',
											tabsize: 2,
											toolbar: [
												// [groupName, [list of button]]
												['style', ['bold', 'italic', 'underline', 'clear']],
												['font', ['strikethrough', 'superscript', 'subscript']],
												['fontsize', ['fontsize']],
												//['color', ['color']],
												['para', ['ul', 'ol', 'paragraph']],
												['height', ['height']]
											]
										});
									//	$('#summernote').summernote('justifyLeft');
									</script>
                    </div>
                    <div class="form-group col-md-6">
                      <label for="exampleFormControlTextarea1">Condiciones</label>
                      <textarea class="form-control" id="condiciones" rows="3" name="condiciones"></textarea>
                         <script>
										$('#condiciones').summernote({
											placeholder: 'Ingrese aqui la condición',
											tabsize: 2,
											toolbar: [
												// [groupName, [list of button]]
												['style', ['bold', 'italic', 'underline', 'clear']],
												['font', ['strikethrough', 'superscript', 'subscript']],
												['fontsize', ['fontsize']],
												//['color', ['color']],
												['para', ['ul', 'ol', 'paragraph']],
												['height', ['height']]
											]
										});
									//	$('#summernote').summernote('justifyLeft');
									</script>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group col-md-6">
                      <label for="exampleFormControlTextarea1">Sucursales</label><br>
                      {{#each sucursales as | sucursal i|}}
                      <label id="suc{{sucursal.id}}"><input type="checkbox" id="cbox1" value="{{sucursal.id}}" name="sucursales[]" class="sucursales_check {{sucursal.id}}"> {{sucursal.nombre}}</label><br>
                      {{/each}}
                    </div>
                    <div class="form-group col-md-6">
                      <label for="exampleFormControlTextarea1">Empleados</label><br>
                      {{#each sucursales as | sucursal i|}}
                        {{#empleados_publicacion sucursal.encargados sucursal.id}}
                    
                          {{/empleados_publicacion}}
                      {{/each}}
                    </div>
                  </div>
                  <button type="submit" class="btn btn-primary btn_submit">Guardar cambios</button>
                  <button type="button" class="btn btn-primary preview">Vista previa</button>
                </div>
              </form>
            </div>

          </div>

          <div class="container" id="preview_publicacion" style="display: none;">

            <section class="pb-5 pt-5 gallery-presentation" id="gallery-presentation">
<div style="display:none">
  <p class="card-text"  style="text-align: left;"><span id="preparacion_p"></span> y Ejecución: <span id="ejecucion_p"></span> </p>
</div>
        <div class="container" style="max-width: 1200px !important;">
                <div class="row">
                  <div class="col-md-6">
                    <div id="content-wrapper">
  <div class="column">
		<span id="spanP1_P"><img id="featured" src="../assets/img_up/foto_camara.png" id="img_previewP"></span>

			<div id="slide-wrapper" >
				<div id="slider">
				<span id="spanP1"> 	<img class="thumbnail active" src="../assets/img_up/foto_camara.png" id="img_preview"></span>
					<span id="spanP1"> <img class="thumbnail" src="../assets/img_up/foto_camara.png" id="img1"></span>
					<span id="spanP1"> <img class="thumbnail" src="../assets/img_up/foto_camara.png" id="img2"></span>

				<span id="spanP1"> 	<img class="thumbnail" src="../assets/img_up/foto_camara.png"   id="img3"></span>
				<span id="spanP1"> 	<img class="thumbnail" src="../assets/img_up/foto_camara.png" id="img4"></span>
				</div>
			</div>
</div>
<script type="text/javascript">
		let thumbnails = document.getElementsByClassName('thumbnail')

		let activeImages = document.getElementsByClassName('active')

 for (var i = 0; i < thumbnails.length; i++) {

                          thumbnails[i].addEventListener('mouseover', function () {
                            if (activeImages.length > 0) {
                              activeImages[0].classList.remove('active')
                            }                  
                      
                            this.classList.add('active')
                            var elementType = $(this).prop('tagName');;
                            console.log(elementType)
                            if (elementType == "IMG"){
                              $('#spanP1_P').html(`<img id="featured"
                          src="${this.src}">`)
                            }else{
                              $('#replace').html(`<video src="${this.src}" controls width="550" height="400"></video>`)
                            }
                            
                          })
                        }


		let buttonRight = document.getElementById('slideRight');
		let buttonLeft = document.getElementById('slideLeft');

		buttonLeft.addEventListener('click', function(){
			document.getElementById('slider').scrollLeft -= 180
		})

		buttonRight.addEventListener('click', function(){
			document.getElementById('slider').scrollLeft += 180
		})


	</script>
                
            </div>
        </div>
  <div class="col-md-6">
                    <h2 class="pb-3">
                        <strong id="">
                          <span id="titulo_preview" style="color: black;">
                            </span>
                            <br>
                            <span id="precio_preview" >

                            </span>
                        </strong>
                    </h2>

                    <p>
                        <strong>
                            Atención: Lunes a Sábado (<span id="desde_preview"></span> am - <span id="hasta_preview"></span> pm)
                            <br >
                           Duración:  <span id="duracion_total">20 min. </span>
                        </strong>
                    </p>
                    <p id="descripcion_preview">
                      
                    </p>

                    <div class="dom-loc pb-3 d-none">
                      <input type="radio" class="lugar_serv_ " value="A Domicilio" name="lugar_serv_" id=""><label>A
                        Domicilio <span></span></label>
                      <input type="radio" class="lugar_serv_" value="En Local" name="lugar_serv_" id=""><label>En
                        Local</label>
                    </div>
                    <div class="dom-loc pb-3">
                      <img src="../assets/img/{{#if publicacion.domicilio}}checked.svg{{else}}cancel.svg{{/if}}" alt="" class="checkeds-img"><span
                        style="margin-top: 3px;">Domicilio</span>
                      <img src="../assets/img/checked.svg" alt="" class="checkeds-img" style="margin-top: 0;"><span
                        class="checkeds-p">Local</span>
                    </div>

                    <button class="btn btn-primary">
                        Reservar
                    </button>

                    <div class="cat-gallery-gallery-presentation pt-3">
                        <strong>Categorías:</strong> <span id="categoria_previ"></span>
                    </div>

                </div>

    </section>
    <section id="reservar" class="reservar">
        <div class="container">
          <div class="row">

                  <div class="col d-flex justify-content-center">
                    <div class="switch-toggle switch-3 switch-candy switch">
                      <input id="on" name="state-d" type="radio"  value="Domicilio"/>
                      <label for="on" >Domicilio</label>

                      <input id="off" name="state-d" type="radio" value="Local" checked/>
                      <label for="off">Local</label>

                      <a></a>
                    </div>
                  </div>
                </div>
            <div class="row">
                <div class="col-12">
                    <h1>
                        <strong>
                        Reservar
                        </strong>
                    </h1>
                </div>
             

                  <div class="col-md-6 pt-5">

                    <div class="form-group" id="distritos_habilitados" style="display: none;">
                      <label for="formGroupExampleInput">Seleccione el distrito (local):</label>
                      <select class="form-control" name="distrito" id="distritos_h">
                        <option selected value="0">Seleccione un distrito</option>
                        
                        </div>

                    <div class="form-group" id="locales_habiles" style="display: none;">
                      <label for="">Escoger local:</label>
                      <select id="sucursales" class="form-control" name="sucursal">
                        <option selected value="0">Seleccione un local</option>
                        
                        <span id="sucursales_p"></span></p>
                       <button type="button" id="ver_ubicacion"> Ver Ubicación</button>
                    </div>
                    <div class="form-group" id="empleados_" style="display: none;">
                      <label for="">Escoger trabajador:</label>
                      <select id="empleado" class="form-control" name="empleado">
                        <option selected>Seleccione un trabajador</option>
                       
                      </select>

                      <span id="sucursales_p"></span></p>
                    </div>
                    <div class="form-group" id="dirigido_a" style="display: none;">
                      <label for="">Indique para quien es el servicio:</label>
                      <select id="servicio_para" class="form-control servicio_para" name="lugar_serv_propio">
                        <option selected>Seleccione una opcion</option>
                        <option>Personal</option>
                        <option>A Tercero</option>
                      </select>

                      <span id="sucursales_p"></span></p>
                    </div>

                    <div class="form-group">
                      <label for="">Distrito:*</label>
                      <input type="text" class="form-control" id="" name="distrito_tercero">
                    </div>
                    <div class="form-group">
                      <label for="">Dirección:*</label>
                      <input type="text" class="form-control" id="" name="direccion_tercero">
                    </div>

                    <div class="form-group">
                      <label for="">Nombre y apellido:*</label>
                      <input type="text" class="form-control" id="" name="nombre_del_tercero">


                    </div>
                    <div class="form-group">
                      <label for="">Celular:*</label>
                      <input type="text" class="form-control" id="" name="telefono_tercero">
                    </div>
                    <div class="form-group">
                      <label for="">Agregar comentario:</label>
                      <textarea class="form-control" id="" rows="3" name="comentario_p"></textarea>
                    </div>
                  </div>
                  <div class="col-md-6 pt-5">
                    <p>Escoger fecha: </p>
                    <div style="overflow:hidden;">
                      <input type="date" name="fecha" id="fecha" hidden>
                      <div class="form-group">
                        <div class="">
                          <div class="">
                            <div id="datetimepicker12"></div>
                          </div>
                        </div>
                      </div>
                      <script type="text/javascript">
                        $(function () {
                          $('#datetimepicker12').datetimepicker({
                            inline: true,
                            sideBySide: true,
                            format: 'L',

                          });
                          /*  $("#datetimepicker12").on("dp.change", function (e) {
                              console.log(e.date.format('YYYY-MM-DD'))
                      
                      });*/
                        });
                      </script>
                    </div>

                    <p>Escoger hora:*</p>
                    <div class="row" id="disponibles">

                    </div>
                  </div>
                  <div class="col-md-12">
                    <div style="float: left; padding-top: .35rem;">Agregar cupón:</div>
                    <div style="float: right; width: calc(100% - 125px); position: relative;">
                      <input type="text" class="form-control" id="cupon">
                      <button class="btn btn-outline-success my-2 my-sm-0 add_cupon" type="button">
                        Añadir
                      </button>
                    </div>
                  </div>
            </div>
            <div class="row">
                <div class="col-12 pt-3">
                    <div style="float: left;">
                        Precio de servicio:
                    </div> 
                    <div style="float: right;">
                        S/<span id="costo_serv"></span>
                    </div>
                </div>
                <div class="col-12 pt-3" style="border-bottom: 1px solid black;">
                    <div style="float: left;">
                        Precio de transporte:
                    </div> 
                    <div style="float: right;">
                        S/<span id="costo_trans"></span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 pt-3">
                    <div style="float: left;">
                        <h2>
                            <strong>
                                TOTAL A PAGAR:
                            </strong>
                        </h2>
                    </div>
                    <div style="float: right;">
                        <h2>
                            <strong>
                                S/<span>35.00</span> 
                            </strong>
                        </h2>
                    </div>
                </div>
            </div>
            <div class="row reservar">
                <div class="col-12 pt-3">
                    <button type="submit" class="btn btn-primary active btn_submit_preview" style="width: 100%;padding: 1.5rem; font-size: 25px; font-weight: 700; border-radius: 15px;">
                        Guardar Cambios
                    </button>
                  <button type="button" class="btn btn-primary preview">Editar</button>
                </div>
            </div>
        </div>
    </section>

          </div>
          {{/if}}
           {{#if editar_publicacion}}
          <div class="row editar_public reservar" id="crear_publicacion">

            <div class="card-blank" style="width: 65%;margin-left: 15px; margin-bottom: 10px;">
              <div class="overview-wrap pt-4 pl-4 pr-4">
                <h2 class="title-1">Editar publicación</h2>
                <div class="float-right"><a href="/mispublicaciones" id="volver_publicaciones"> Volver </a></div>
              </div>
              <form action="/editar_publicacion" method="post" id="form_mis_publicaciones">
              <input type="text" id="id_publicacion" class="" name='id_publicacion' hidden value="{{publicacion.id}}">
                <div class="row">
                  <div class="col">
                    <center>
                      {{#fotoVPublicacionCreat publicacion.fotos 0 1}}{{/fotoVPublicacionCreat}}
                      <!--<img id="imageSelected1" class="img-fluid"
                        src="../assets/img_up/"
                        onclick="document.getElementById('profile-img1').click();" width="50px" />-->
                      <input
                        class="border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm img_publicacion"
                        id="profile-img1" type="file" accept=".png, .mp4, .webm, .ogg, .jpg, .jpeg" name="image" hidden />
                      <input type="text" id="imagen1" class="" name='photo' hidden required value="{{#fotoPublicacion1Pri publicacion.fotos 0}}{{/fotoPublicacion1Pri}}">
                      
                      <div id='progressBar3' class='progress-bar profile-img1-Pro' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: 0%; border-radius: 10px;'>0%

				</div>
                      <button type="button" class="btn btn-primary btn-upload-img" onclick="document.getElementById('profile-img1').click();">Subir img/video</button>
                    </center>
                  </div>
                  <div class="col">
                    <center>
                      {{#fotoVPublicacionCreat publicacion.fotos 1 2}}{{/fotoVPublicacionCreat}}
                      <input
                        class="border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm img_publicacion"
                        id="profile-img2" type="file" accept=".png, .mp4, .webm, .ogg, .jpg, .jpeg" name="image" hidden />
                      <input type="text" id="imagen2" class="" name='photo' hidden value="{{#fotoPublicacion1Pri publicacion.fotos 1}}{{/fotoPublicacion1Pri}}">
                      <div id='progressBar3' class='progress-bar profile-img2-Pro' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: 0%; border-radius: 10px;'>0%

				</div>
<button type="button" class="btn btn-primary btn-upload-img" onclick="document.getElementById('profile-img2').click();">Subir img/video</button>
                    </center>
                  </div>
                  <div class="col">
                    <center>
                      {{#fotoVPublicacionCreat publicacion.fotos 2 3}}{{/fotoVPublicacionCreat}}
                      <input
                        class="border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm img_publicacion"
                        id="profile-img3" type="file" accept=".png, .mp4, .webm, .ogg, .jpg, .jpeg" name="image" hidden />
                      <input type="text" id="imagen3" class="" name='photo' hidden value="{{#fotoPublicacion1Pri publicacion.fotos 2}}{{/fotoPublicacion1Pri}}">
                      <div id='progressBar3' class='progress-bar profile-img3-Pro' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: 0%; border-radius: 10px;'>0%

				</div>
<button type="button" class="btn btn-primary btn-upload-img" onclick="document.getElementById('profile-img3').click();">Subir img/video</button>
                    </center>
                  </div>
                  <div class="col">
                    <center>
                      {{#fotoVPublicacionCreat publicacion.fotos 3 4}}{{/fotoVPublicacionCreat}}
                      <input
                        class="border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm img_publicacion"
                        id="profile-img4" type="file" accept=".png, .mp4, .webm, .ogg, .jpg, .jpeg" name="image" hidden />
                      <input type="text" id="imagen4" class="" name='photo' hidden value="{{#fotoPublicacion1Pri publicacion.fotos 3}}{{/fotoPublicacion1Pri}}">
                      <div id='progressBar3' class='progress-bar profile-img4-Pro' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: 0%; border-radius: 10px;'>0%

				</div>
<button type="button" class="btn btn-primary btn-upload-img" onclick="document.getElementById('profile-img4').click();">Subir img/video</button>
                    </center>
                  </div>
                  <div class="col">
                    <center>
                      {{#fotoVPublicacionCreat publicacion.fotos 4 5}}{{/fotoVPublicacionCreat}}
                      <input
                        class="border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm img_publicacion"
                        id="profile-img5" type="file" accept=".png, .mp4, .webm, .ogg, .jpg, .jpeg" name="image" hidden />
                      <input type="text" id="imagen5" class="" name='photo' hidden value="{{#fotoPublicacion1Pri publicacion.fotos 4}}{{/fotoPublicacion1Pri}}">
                       <div id='progressBar3' class='progress-bar profile-img5-Pro' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: 0%; border-radius: 10px;'>0%
                      </div>
<button type="button" class="btn btn-primary btn-upload-img" onclick="document.getElementById('profile-img5').click();">Subir img/video</button>
                    </center>
                  </div>
                </div>

                <div class="card-body">

                  <input type="text" class="form-control" name="userid" hidden value="{{user.id}}" />

                  <div class="col">
                    <div class="form-row" style="display: none;">
                      <div class="col-7">
                        <label for="formGroupExampleInput">Horario de atención:</label>
                      </div>
                      <div class="col">
                        Desde <input type="time" class="form-control" placeholder="Desde" name="desde" id="desde" value="{{publicacion.horario_desde}}">
                      </div>
                      <div class="col">
                        A <input type="time" class="form-control" placeholder="Hasta" name="hasta" id="hasta" value="{{publicacion.horario_hasta}}">
                      </div>
                    </div>
                  </div>
                  <div class="col" style="padding: 0;">
                      <div class="col-12" style="padding: 0;">
                        <label for="formGroupExampleInput">Tiempo de duración del servicio:</label>
                      </div>
                    <div class="form-row">
                      <div class="col">
                        Preparación <input type="text" class="form-control" placeholder="Tiempo de Preparación" name="preparacion" id="preparacion" value="{{publicacion.preparacion}}">
                      </div>
                      <div class="col">
                        Ejecución <input type="text" class="form-control" placeholder="Tiempo de ejecucion" name="ejecucion" id="ejecucion" value="{{publicacion.ejecucion}}">
                      </div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="col-md-3 mb-3">
                      <label for="inputEmail4">Título principal</label>
                      <input type="text" class="form-control" id="titulo" placeholder="Nombre" name="titulo" required value="{{publicacion.titulo}}">
                    </div>
                    <div class="col-md-3 mb-3">
                      <label for="inputPassword4">Precio</label>
                      <input type="number" class="form-control" id="precio" name="precio" step="0.01" required value="{{publicacion.precio}}">
                      <input type="number" class="form-control" id="comision" name="comision" step="0.01" value="{{comision.valor}}" hidden>
                    </div>
                    <div class="col-md-3 mb-3">
                      <label for="inputPassword4">Billetera</label>
                      <input type="number" class="form-control" id="billetera" name="billetera" step="0.01" required value="{{publicacion.billetera}}" readonly>
                    </div>
                    <div class="col-md-3 mb-3" id="costo_domicilio">
                      <label for="inputPassword4">Costo domicilio</label>
                      <input type="number" class="form-control" id="costo_domicilio" name="costo_domicilio" step="0.01" value="{{publicacion.costo_domicilio}}" >
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group col-md-4">
                      <label for="inputState">Categoría</label>
                      <select id="categorias" multiple class="select2 form-control" name="categoria">
                        <option selected value="{{publicacion.categoria}}">{{publicacion.categoria}} </option>
                        {{#each categorias as |categoria i|}}
                        <option value="{{categoria.nombre}}">{{categoria.nombre}} </option>
                         {{/each}}
                      </select>

                    </div>
                    <div class="form-group col-md-3">
                      <label for="inputState">Estado</label>
                      <select id="inputState" class="form-control" name="estado">
                        <option selected value="{{publicacion.estado}}">{{publicacion.estado}} </option>
                        <option selected value="Activa">Activa </option>
                        <option value="Inactiva">Inactiva</option>
                      </select>
                    </div>
                    <div class="form-group col-md-5">
                      <label for="inputState">Servicio a domicilio</label><br>
                      <label id=""><input type="checkbox" id="domicilio_check" name="domicilio" {{#if publicacion.domicilio}}checked{{/if}}> ¿Tiene servicio a domicilio?</label>
                    </div>
                  </div>

                  <div class="form-row">
                    <div class="form-group col-md-6">
                      <label for="exampleFormControlTextarea1">Descripción</label>
                      <textarea class="form-control" id="descripcion" rows="3" name="descripcion">{{publicacion.descripcion}}</textarea>
                      <script>
										$('#descripcion').summernote({
											placeholder: 'Ingrese aqui la descripción',
											tabsize: 2,
											
											toolbar: [
												// [groupName, [list of button]]
												['style', ['bold', 'italic', 'underline', 'clear']],
												['font', ['strikethrough', 'superscript', 'subscript']],
												['fontsize', ['fontsize']],
												//['color', ['color']],
												['para', ['ul', 'ol', 'paragraph']],
												['height', ['height']]
											]
										});
									//	$('#summernote').summernote('justifyLeft');
									</script>
                    </div>
                    <div class="form-group col-md-6">
                      <label for="exampleFormControlTextarea1">Condiciones</label>
                      <textarea class="form-control" id="condiciones" rows="3" name="condiciones">{{publicacion.condiciones}}</textarea>
                      <script>
										$('#condiciones').summernote({
											placeholder: 'Ingrese aqui la descripción',
											tabsize: 2,
											toolbar: [
												// [groupName, [list of button]]
												['style', ['bold', 'italic', 'underline', 'clear']],
												['font', ['strikethrough', 'superscript', 'subscript']],
												['fontsize', ['fontsize']],
												//['color', ['color']],
												['para', ['ul', 'ol', 'paragraph']],
												['height', ['height']]
											]
										});
									//	$('#summernote').summernote('justifyLeft');
									</script>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group col-md-6">
                      <label for="exampleFormControlTextarea1">Sucursales</label><br>
                      {{#each sucursales as | sucursal i|}}
                      <label id="suc{{sucursal.id}}"><input type="checkbox" id="cbox1" value="{{sucursal.id}}" name="sucursales[]" class="sucursales_check {{sucursal.id}}"{{#chek_suc sucursal.id ../publicacion.sucursales}}{{/chek_suc}}> {{sucursal.nombre}}</label><br>
                      {{/each}}
                    </div>
                    <div class="form-group col-md-6">
                      <label for="exampleFormControlTextarea1">Empleados</label><br>
                      {{#each sucursales as | sucursal i|}}
                          {{#each sucursal.encargados as | empleados i|}}
                          <div class="sucur{{sucursal.id}}" style="display:none;">
                          <label><input type="checkbox" id="empleado{{empleados.id}}" value="{{empleados.id}}" name="empleados[]" class="empleados_check{{empleados.sucursaleId}}" {{#empleados_publicacionchek empleados.id ../../publicacion.empleados}}{{/empleados_publicacionchek}} >{{empleados.nombre}}</label><br>
                          </div>
                          {{/each}}
                        
                      {{/each}}
                    </div>
                  </div>
                  <button type="submit" class="btn btn-primary btn_submit">Guardar cambios</button>
                  <button type="button" class="btn btn-primary preview">Vista Previa</button>
                </div>
              </form>
            </div>

          </div>

         <div class="container" id="preview_publicacion" style="display: none;">

            <section class="pb-5 pt-5 gallery-presentation" id="gallery-presentation">
<div style="display:none">
  <p class="card-text"  style="text-align: left;"><span id="preparacion_p"></span> y Ejecución: <span id="ejecucion_p"></span> </p>
</div>
        <div class="container" style="max-width: 1200px !important;">
                <div class="row">
                  <div class="col-md-6">
                    <div id="content-wrapper">
  <div class="column">
		<span id="spanP1_P"><img id="featured" src="../assets/img_up/foto_camara.png" id="img_previewP"></span>

			<div id="slide-wrapper" >
				<div id="slider">
				<span id="spanP1"> 	<img class="thumbnail active" src="../assets/img_up/foto_camara.png" id="img_preview"></span>
					<span id="spanP1"> <img class="thumbnail" src="../assets/img_up/foto_camara.png" id="img1"></span>
					<span id="spanP1"> <img class="thumbnail" src="../assets/img_up/foto_camara.png" id="img2"></span>

				<span id="spanP1"> 	<img class="thumbnail" src="../assets/img_up/foto_camara.png"   id="img3"></span>
				<span id="spanP1"> 	<img class="thumbnail" src="../assets/img_up/foto_camara.png" id="img4"></span>
				</div>
			</div>
</div>
<script type="text/javascript">
		let thumbnails = document.getElementsByClassName('thumbnail')

		let activeImages = document.getElementsByClassName('active')

 for (var i = 0; i < thumbnails.length; i++) {

                          thumbnails[i].addEventListener('mouseover', function () {
                            if (activeImages.length > 0) {
                              activeImages[0].classList.remove('active')
                            }                  
                      
                            this.classList.add('active')
                            var elementType = $(this).prop('tagName');;
                            console.log(elementType)
                            if (elementType == "IMG"){
                              $('#spanP1_P').html(`<img id="featured"
                          src="${this.src}">`)
                            }else{
                              $('#replace').html(`<video src="${this.src}" controls width="550" height="400"></video>`)
                            }
                            
                          })
                        }


		let buttonRight = document.getElementById('slideRight');
		let buttonLeft = document.getElementById('slideLeft');

		buttonLeft.addEventListener('click', function(){
			document.getElementById('slider').scrollLeft -= 180
		})

		buttonRight.addEventListener('click', function(){
			document.getElementById('slider').scrollLeft += 180
		})


	</script>
                
            </div>
        </div>
  <div class="col-md-6">
                    <h2 class="pb-3">
                        <strong id="">
                          <span id="titulo_preview" style="color: black;">
                            </span>
                            <br>
                            <span id="precio_preview" >

                            </span>
                        </strong>
                    </h2>

                    <p>
                        <strong>
                            Atención: Lunes a Sábado (<span id="desde_preview"></span> am - <span id="hasta_preview"></span> pm)
                            <br >
                           Duración:  <span id="duracion_total">20 min. </span>
                        </strong>
                    </p>
                    <p id="descripcion_preview">
                      
                    </p>

                    <div class="dom-loc pb-3 d-none">
                      <input type="radio" class="lugar_serv_ " value="A Domicilio" name="lugar_serv_" id=""><label>A
                        Domicilio <span></span></label>
                      <input type="radio" class="lugar_serv_" value="En Local" name="lugar_serv_" id=""><label>En
                        Local</label>
                    </div>
                    <div class="dom-loc pb-3">
                      <img src="../assets/img/cancel.svg" alt="" class="checkeds-img"><span
                        style="margin-top: 3px;">Domicilio</span>
                      <img src="../assets/img/checked.svg" alt="" class="checkeds-img" style="margin-top: 0;"><span
                        class="checkeds-p">Local</span>
                    </div>

                    <button class="btn btn-primary">
                        Reservar
                    </button>

                    <div class="cat-gallery-gallery-presentation pt-3">
                        <strong>Categorías:</strong> <span id="categoria_previ"></span>
                    </div>

                </div>

    </section>
    <section id="reservar" class="reservar">
        <div class="container">
          <div class="row">

                  <div class="col d-flex justify-content-center">
                    <div class="switch-toggle switch-3 switch-candy switch">
                      <input id="on" name="state-d" type="radio"  value="Domicilio"/>
                      <label for="on" >Domicilio</label>

                      <input id="off" name="state-d" type="radio" value="Local" checked/>
                      <label for="off">Local</label>

                      <a></a>
                    </div>
                  </div>
                </div>
            <div class="row">
                <div class="col-12">
                    <h1>
                        <strong>
                        Reservar
                        </strong>
                    </h1>
                </div>
             

                  <div class="col-md-6 pt-5">

                    <div class="form-group" id="distritos_habilitados" style="display: none;">
                      <label for="formGroupExampleInput">Seleccione el distrito (local):</label>
                      <select class="form-control" name="distrito" id="distritos_h">
                        <option selected value="0">Seleccione un distrito</option>
                        
                        </div>

                    <div class="form-group" id="locales_habiles" style="display: none;">
                      <label for="">Escoger local:</label>
                      <select id="sucursales" class="form-control" name="sucursal">
                        <option selected value="0">Seleccione un local</option>
                        
                        <span id="sucursales_p"></span></p>
                       <button type="button" id="ver_ubicacion"> Ver Ubicación</button>
                    </div>
                    <div class="form-group" id="empleados_" style="display: none;">
                      <label for="">Escoger trabajador:</label>
                      <select id="empleado" class="form-control" name="empleado">
                        <option selected>Seleccione un trabajador</option>
                       
                      </select>

                      <span id="sucursales_p"></span></p>
                    </div>
                    <div class="form-group" id="dirigido_a" style="display: none;">
                      <label for="">Indique para quien es el servicio:</label>
                      <select id="servicio_para" class="form-control servicio_para" name="lugar_serv_propio">
                        <option selected>Seleccione una opcion</option>
                        <option>Personal</option>
                        <option>A Tercero</option>
                      </select>

                      <span id="sucursales_p"></span></p>
                    </div>

                    <div class="form-group">
                      <label for="">Distrito:*</label>
                      <input type="text" class="form-control" id="" name="distrito_tercero">
                    </div>
                    <div class="form-group">
                      <label for="">Dirección:*</label>
                      <input type="text" class="form-control" id="" name="direccion_tercero">
                    </div>

                    <div class="form-group">
                      <label for="">Nombre y apellido:*</label>
                      <input type="text" class="form-control" id="" name="nombre_del_tercero">


                    </div>
                    <div class="form-group">
                      <label for="">Celular:*</label>
                      <input type="text" class="form-control" id="" name="telefono_tercero">
                    </div>
                    <div class="form-group">
                      <label for="">Agregar comentario:</label>
                      <textarea class="form-control" id="" rows="3" name="comentario_p"></textarea>
                    </div>
                  </div>
                  <div class="col-md-6 pt-5">
                    <p>Escoger fecha: </p>
                    <div style="overflow:hidden;">
                      <input type="date" name="fecha" id="fecha" hidden>
                      <div class="form-group">
                        <div class="">
                          <div class="">
                            <div id="datetimepicker12"></div>
                          </div>
                        </div>
                      </div>
                      <script type="text/javascript">
                        $(function () {
                          $('#datetimepicker12').datetimepicker({
                            inline: true,
                            sideBySide: true,
                            format: 'L',

                          });
                          /*  $("#datetimepicker12").on("dp.change", function (e) {
                              console.log(e.date.format('YYYY-MM-DD'))
                      
                      });*/
                        });
                      </script>
                    </div>

                    <p>Escoger hora:*</p>
                    <div class="row" id="disponibles">

                    </div>
                  </div>
                  <div class="col-md-12">
                    <div style="float: left; padding-top: .35rem;">Agregar cupón:</div>
                    <div style="float: right; width: calc(100% - 125px); position: relative;">
                      <input type="text" class="form-control" id="cupon">
                      <button class="btn btn-outline-success my-2 my-sm-0 add_cupon" type="button">
                        Añadir
                      </button>
                    </div>
                  </div>
            </div>
            <div class="row">
                <div class="col-12 pt-3">
                    <div style="float: left;">
                        Precio de servicio:
                    </div> 
                    <div style="float: right;">
                        S/<span id="costo_serv"></span>
                    </div>
                </div>
                <div class="col-12 pt-3" style="border-bottom: 1px solid black;">
                    <div style="float: left;">
                        Precio de transporte:
                    </div> 
                    <div style="float: right;">
                        S/<span id="costo_trans"></span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 pt-3">
                    <div style="float: left;">
                        <h2>
                            <strong>
                                TOTAL A PAGAR:
                            </strong>
                        </h2>
                    </div>
                    <div style="float: right;">
                        <h2>
                            <strong>
                                S/<span>35.00</span> 
                            </strong>
                        </h2>
                    </div>
                </div>
            </div>
            <div class="row reservar">
                <div class="col-12 pt-3">
                    <button type="submit" class="btn btn-primary active btn_submit_preview" style="width: 100%;padding: 1.5rem; font-size: 25px; font-weight: 700; border-radius: 15px;">
                        Guardar Cambios
                    </button>
                  <button type="button" class="btn btn-primary preview">Editar</button>
                </div>
            </div>
        </div>
    </section>

          </div>
          {{/if}}
      </main>
    </div>

  </div>
</div>